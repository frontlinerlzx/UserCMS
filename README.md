# UserCMS
这是一个用户权限管理系统

项目已经部署到服务器端

数据库文件暂时不上传



        框架：Spring MVC + Spring + Mybatis
        
        依赖管理：maven

        数据库：Oracle

        工具：idea

        其他：spring security + pagehelper

数据库设计：

        用户表

        角色表

        资源权限表

        用户表-角色表（多对多）

        角色表-资源权限表（多对多）

        订单表

        产品表

        旅客表


介绍：
        
        整个项目使用SSM框架来完成，利用三层架构MVC思想，表现层springmvc，业务逻辑层使用spring，持久层mybatis，并且使用spring整合springmvc和 spring整个mybatis，使用spring来管理mybatis，所有的sql使用注解开发，spring用来减少耦合，使用大量的依赖注入。

模块：
        
        用户模块：登陆管理系统和使用管理系统，管理用户

        角色模块：赋予用户角色，得到不同的资源权限

        资源权限模块：赋予角色，用来限制用户可以操作的范围，具体使用security来设置方法访问限制

        订单模块：可以查询旅客和产品和订单的所有信息（目的是使用@Results来进行多表查询，详细---结合旅客+产品+订单多表查询）

        产品模块：管理产品

所有项目难点：

        1.分页查询：结合pagehelper来解决，前端使用el+jstl来完成分页获取参数

        2.删除涉及外键的条目：需要获取指定条目的id来拿到所有外键，删除所有有关的外键之后，再删除指定条目

        3.订单的详情查询：涉及多表查询，需要@Results来解决多个对象的封装，此时直接调用其他Dao类的查询方法，来封装多个对象

        4.权限控制：security来对所有访问的方法控制，是否对某个角色显示需要用security:authentication来控制标签是否显示
        
        
项目部署：
        
        网址：http://taritaki.cn
        
        1.项目打包成war
        
        2.上传服务器webapp
        
        3.修改conf/server可以设置默认项目
        
        4.Oracle数据库迁移
        
        5.启动tomcat部署项目
        
项目部署疑难点：
                 
        1.了解war工程目录结构，用maven 来导出war包，并且需要放置到tomcat服务器webapp来加载项目
                 
        2.首次使用sql数据迁移失败，导致数据丢失，数据乱码，第二次在本地使用工具远程连接数据库，然后直接复制数据库迁移数据，这样完美解决sql迁移数据的各种问题
         
        3.（艰难安装）oracle11g安装在centos7上失败了2次，第一个问题是出现在未配置Swap ，第二个问题bash_profile配置文件失效，最后总结了一套可以部署可以服务器的完美方案。还碰到一次数据库实例失效了，无法连接主机，无奈只能删除实例，然后重新创建，重新导入数据库，最终可以使用。

        
        
 总结：
        
        项目中出现最多最难的bug是在项目部署，一旦出现某个问题，首先通过网络搜索解决方案，如果未解决就开始判断和定位错误的具体位置，有很多次判断错误都出现了差错，比如一些数据迁移，tomcat加载项目时也出现过一些bug，最终的定位在war工程目录结构，然后解决了，本以为没有classes，实际是放在web-inf下面。
        

